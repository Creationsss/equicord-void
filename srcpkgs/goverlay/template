# Template file for 'goverlay'
pkgname=goverlay
version=1.7.4
revision=1
_version="${version//./_}"
archs="x86_64"
wrksrc=squashfs-root
short_desc="GUI for configuring MangoHud, vkBasalt, and other Linux gaming tools"
maintainer="creations <creations@creations.works>"
license="GPL-3.0-or-later"
homepage="https://github.com/benjamimgois/goverlay"
distfiles="https://github.com/benjamimgois/goverlay/releases/download/${version}/goverlay_${_version}-anylinux-x86_64.AppImage"
checksum=2d7aebb80442b9cdf2d836e658683bba6c28c894039f7b000bd588f504d353dd
nostrip=yes
allow_unknown_shlibs=yes

do_extract() {
	local _appimage="${XBPS_SRCDISTDIR}/${pkgname}-${version}/goverlay_${_version}-anylinux-x86_64.AppImage"
	chmod +x "$_appimage"
	"$_appimage" --appimage-extract
}

do_install() {
	vmkdir usr/lib/goverlay
	vcopy AppRun usr/lib/goverlay
	vcopy bin usr/lib/goverlay
	vcopy shared usr/lib/goverlay
	vcopy sharun usr/lib/goverlay
	vcopy share usr/lib/goverlay
	vcopy etc usr/lib/goverlay
	chmod 755 ${DESTDIR}/usr/lib/goverlay/AppRun
	chmod 755 ${DESTDIR}/usr/lib/goverlay/sharun
	chmod 755 ${DESTDIR}/usr/lib/goverlay/bin/goverlay
	ln -sf shared/lib ${DESTDIR}/usr/lib/goverlay/lib
	vbin ${FILESDIR}/goverlay.sh goverlay
	vinstall ${FILESDIR}/goverlay.desktop 644 usr/share/applications
	vinstall ${FILESDIR}/goverlay.png 644 usr/share/pixmaps
	vlicense ${FILESDIR}/LICENSE
}

# Template file for 'labymod-launcher'
pkgname=labymod-launcher
version=2.2.0
revision=1
archs="x86_64"
create_wrksrc=yes
depends="alsa-lib at-spi2-core cairo dbus expat glib gtk+3 libcups
 libdrm libgbm libsecret libX11 libxcb libXcomposite libXdamage libXext
 libXfixes libxkbcommon libXrandr nspr nss pango"
short_desc="LabyMod Launcher for Minecraft"
maintainer="creations <creations@creations.works>"
license="custom:Proprietary"
homepage="https://www.labymod.net"
distfiles="https://releases.r2.labymod.net/launcher/linux/x64/labymodlauncher_${version}_amd64.deb"
checksum=c9c25059072a20506fda72c57aded4141803e59d35e07f587d6f339b9a201f7a
nostrip=yes
allow_unknown_shlibs=yes

do_extract() {
	ar x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/labymodlauncher_${version}_amd64.deb
	bsdtar -xf data.tar.xz
}

do_install() {
	vmkdir usr/lib/labymodlauncher
	vcopy "usr/lib/labymodlauncher/*" usr/lib/labymodlauncher
	chmod 755 ${DESTDIR}/usr/lib/labymodlauncher/labymodlauncher
	chmod 755 ${DESTDIR}/usr/lib/labymodlauncher/chrome_crashpad_handler
	vbin ${FILESDIR}/labymod-launcher.sh labymod-launcher
	vinstall ${FILESDIR}/labymod-launcher.desktop 644 usr/share/applications
	vinstall usr/share/pixmaps/labymodlauncher.png 644 usr/share/pixmaps
}
